#+TITLE: Fractionation Example
#+AUTHOR:Ulrich G Wortmann
#+OX-IPYNB-LANGUAGE: ipython
#+STARTUP: showall
#+OPTIONS: todo:nil tasks:nil tags:nil toc:nil
#+PROPERTY: header-args :eval never-export
#+EXCLUDE_TAGS: noexport
#+LATEX_HEADER: \usepackage{breakurl}
#+LATEX_HEADER: \usepackage{newuli}
#+LATEX_HEADER: \usepackage{uli-german-paragraphs}
#+latex_header: \usepackage{natbib}
#+latex_header: \usepackage{natmove}


* A simple fractionation example


#+BEGIN_SRC ipython :tangle fractionation.py
from esbmtk import Model,  Reservoir
from esbmtk import Connect, Source, Sink, get_delta

Model(
    name="F",     # model name
    stop="10000 yrs",    # end time of model
    timestep=" 100 yr",   # base unit for time
    mass_unit = "mol",  # base unit for mass
    volume_unit = "l",  # base unit for volume
    element="Carbon",    # load default element and species definitions
    m_type = "both",     # calculate mass and isotopes
)
Source(name="SO1", species=CO2)
Sink(name="SI1", species=CO2)

Reservoir(
    name="R1",                # Name of reservoir
    species=CO2,                 # Species handle
    delta=0,                     # initial delta
    concentration="2.6 mmol/l", # cocentration 
    volume="1.332E18 m**3",      # reservoir size (m^3)
)

Connect(
    source=SO1,  # source of flux
    sink=R1,                   # target of flux
    rate="12.3E12 mol/yr",        # weathering flux in 
    plot="no",
)

Connect(
    source=R1,  # source of flux
    sink=SI1,                   # target of flux
    rate="12.3E12 mol/yr",        # weathering flux in 
    alpha=-12,                      # isotope ratio
    plot="yes",
)

F.run()
F.plot_data()
#+END_SRC
